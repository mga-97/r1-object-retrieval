<application>
   <name>R1_Orchestrator_YOLO_erzelli</name>

   <dependencies>
   </dependencies>
   

   <!--                -->
   <!--    MODULES     -->
   <!--                -->


   <!-- audio recorder -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context whisperTranscribe_demo --config yarp_audioFromMic.xml</parameters>
      <node>r1-torso</node>
   </module>
   <module>
      <name>yarpaudiocontrolgui</name>
      <parameters>--remote-rec /audioRecorder_nws</parameters>
   </module>

   <!-- VAD -->
   <module>
      <name>backupVAD</name>
      <parameters></parameters>
      <node>console</node>
   </module>

   <!-- Speech transcription -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context whisperTranscribe_demo --config yarp_transcribe.xml --model ggml-small3.it.bin </parameters>
      <node>pc</node>
   </module>
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context google --from googleSpeechToText.ini</parameters>
      <node>console1</node>
   </module>

   <!-- chat bot -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context google --from googleChatBot.ini</parameters>
      <node>console1</node>
   </module>

   <!-- speech synthesizer -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context google --from googleSynthesizer.ini</parameters>
      <node>console1</node>
   </module>

   <!-- orchestrator -->
   <application>
      <name>R1_goAndFindIt_YOLO_erzelli</name>
      <prefix></prefix>
   </application>  
   <module>
      <name>r1Obr-orchestrator</name>
      <parameters>--context r1Obr-orchestrator --from r1Obr-orchestrator_R1_erzelli.ini</parameters>
      <environment>YARP_PORTNUMBER_r1Obr_orchestrator_voice_command_i=3000</environment>
      <node>console</node>
   </module>
   
   <!-- positive outcome -->
   <application>
      <name>R1_approachObject_YOLO</name>
      <prefix></prefix>
   </application>
   <module>
      <name>handPointing</name>
      <parameters>--context handPointing --from handPointing_R1.ini</parameters>
      <environment></environment>
      <node>console</node>
   </module>   
   <module>
      <name>cer_reaching-solver</name>
      <parameters>--robot cer --arm-type right --verbosity 1</parameters>
      <node>console</node>
   </module>
   <module>
      <name>cer_reaching-controller</name>
      <parameters>--robot cer --arm-type right --verbosity 1 --T 1.0</parameters>
      <node>console</node>
   </module>
   <module>
      <name>cer_reaching-solver</name>
      <parameters>--robot cer --arm-type left --verbosity 1</parameters>
      <node>console</node>
   </module>
   <module>
      <name>cer_reaching-controller</name>
      <parameters>--robot cer --arm-type left --verbosity 1 --T 1.0</parameters>
      <node>console</node>
   </module>
   
   <!-- negative outcome -->
   <application>
      <name>R1_disappointmentPose</name>
      <prefix></prefix>
   </application>

   <!-- face expressions -->
   <module>
      <name>faceExpressionImage5GTour</name>
      <parameters></parameters>
      <node>console</node>
   </module>
   <module>
      <name>yarprobotinterface </name>
      <parameters>--context headSynchronizer --from faceDisplay.ini</parameters>
      <node>r1-face</node>
   </module>

   <!-- audio player -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--context vadModule --from audioPlayer.ini</parameters>
      <node>r1-face</node>
   </module>

   <!-- sensor network receiver -->
   <module>
      <name>yarprobotinterface</name>
      <parameters>--config LLMDevice.xml</parameters>
      <workdir>/usr/local/src/robot/yarp-devices-llm/assets</workdir>
      <node>pc</node>
   </module>
   <module>
      <name>sensorNetworkReceiver</name>
      <parameters>--context sensorNetworkReceiver --from sensorNetworkReceiver.ini</parameters>
      <node>console</node>
   </module>

  <!--                -->
  <!--  CONNECTIONS   -->
  <!--                -->

   <connection>
      <from>/audioRecorder_nws/audio:o</from>
      <to>/vad/audio:i</to>
      <protocol>fast_tcp+recv.portmonitor+file.soundfilter_resample+type.dll+channel.0+frequency.16000</protocol>
   </connection>

   <connection>
      <from>/vad/audio:o</from>
      <to>/speechTranscription_nws/sound:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/speechTranscription_nws/text:o</from>
      <to>/r1Obr-orchestrator/voice_command:i</to>
      <protocol>fast_tcp</protocol>
   </connection>
  
   <connection>
      <from>/r1Obr-orchestrator/nextLocPlanner/request:rpc</from>
      <to>/nextLocPlanner/request/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/goAndFindIt/request:rpc</from>
      <to>/goAndFindIt/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/goAndFindIt/output:o</from>
      <to>/r1Obr-orchestrator/goAndFindIt/result:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/chatBot/microphone:rpc</from>
      <to>/audioRecorder_nws/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/microphone:rpc</from>
      <to>/audioRecorder_nws/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/faceExpressionImage/image:o</from>
      <to>/robot/faceDisplay/image:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/faceExpression:rpc</from>
      <to>/faceExpressionImage/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/yarpYolo/where_coords:o</from>
      <to>/r1Obr-orchestrator/continousSearch/object_finder_result:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/cer_reaching-controller/right/solver:rpc</from>
      <to>/cer_reaching-solver/right/rpc</to>
      <protocol>tcp</protocol>
   </connection>

   <connection>
      <from>/cer_reaching-controller/left/solver:rpc</from>
      <to>/cer_reaching-solver/left/rpc</to>
      <protocol>tcp</protocol>
   </connection>

   <connection>
      <from>/handPointing/r_target:o</from>
      <to>/cer_reaching-controller/right/target:i</to>
      <protocol>tcp</protocol>
   </connection>

   <connection>
      <from>/handPointing/l_target:o</from>
      <to>/cer_reaching-controller/left/target:i</to>
      <protocol>tcp</protocol>
   </connection>

   <connection>
      <from>/handPointing/gazeTarget:o</from>
      <to>/cer_gaze-controller/target:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/handPointing/get_arm_home:o</from>
      <to>/handPointing/go_home:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/approachObject/output_coords:o</from>
      <to>/r1Obr-orchestrator/positive_outcome_feedback:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/speech_sythesizer/audio:o</from>
      <to>/audioPlayerWrapper/audio:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/r1Obr-orchestrator/speech_sythesizer/second/audio:o</from>
      <to>/audioPlayerWrapper/audio:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/audioPlayerWrapper/status:o</from>
      <to>/r1Obr-orchestrator/chatBot/audioplayerStatus:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/audioPlayerWrapper/status:o</from>
      <to>/r1Obr-orchestrator/audioplayerStatus:i</to>
      <protocol>fast_tcp</protocol>
   </connection>

   <connection>
      <from>/audioPlayerWrapper/status:o</from>
      <to>/faceExpressionImage/mouthAudioData:i</to>
      <protocol>fast_tcp</protocol>
   </connection>   

   <connection>
      <from>/sensorNetworkReceiver/output:o</from>
      <to>/r1Obr-orchestrator/voice_command:i</to>
      <protocol>fast_tcp</protocol>
   </connection> 

   <connection>
      <from>/r1Obr-orchestrator/sensorNetworkFeedback:o</from>
      <to>/sensorNetworkReceiver/input:i</to>
      <protocol>fast_tcp</protocol>
   </connection>  

   <connection>
      <from>/sensorNetworkReceiver/orchestrator:rpc</from>
      <to>/r1Obr-orchestrator/rpc</to>
      <protocol>fast_tcp</protocol>
   </connection>   
      
</application>
